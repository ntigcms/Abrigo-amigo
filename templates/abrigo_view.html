{% extends "principal.html" %}

{% block content %}
<h1 style="text-align:center; margin-bottom:25px;">Visualizar Abrigo</h1>

<form class="abrigo-form">

  <div class="form-grid">

      <!-- Campos do abrigo -->
      <div class="form-group">
          <label>ID:</label>
          <input type="text" value="{{ abrigo.id }}" readonly>
      </div>
      <div class="form-group">
          <label>Nome:</label>
          <input type="text" value="{{ abrigo.nome }}" readonly>
      </div>
      <div class="form-group">
          <label>CEP:</label>
          <input type="text" value="{{ abrigo.cep }}" readonly>
      </div>
      <div class="form-group">
          <label>Logradouro:</label>
          <input type="text" value="{{ abrigo.logradouro }}" readonly>
      </div>
      <div class="form-group">
          <label>Bairro:</label>
          <input type="text" value="{{ abrigo.bairro }}" readonly>
      </div>
      <div class="form-group">
          <label>Cidade:</label>
          <input type="text" value="{{ abrigo.cidade }}" readonly>
      </div>
      <div class="form-group">
          <label>Estado:</label>
          <input type="text" value="{{ abrigo.estado }}" readonly>
      </div>
      <div class="form-group">
          <label>Status:</label>
          <input type="text" value="{{ abrigo.status }}" readonly>
      </div>
      <div class="form-group">
          <label>Latitude:</label>
          <input type="text" value="{{ abrigo.latitude }}" readonly>
      </div>
      <div class="form-group">
          <label>Longitude:</label>
          <input type="text" value="{{ abrigo.longitude }}" readonly>
      </div>

  </div>

  <!-- Mapa em bloco separado -->
  <div class="form-item full-width" style="margin-top:20px;">
      <label>Localização:</label>
      <div id="map" style="height: 350px; border-radius: 6px;"></div>
  </div>

  <div class="buttons">
      <a href="/config/abrigos" class="btn-cancel">Voltar</a>
  </div>

</form>


<!-- Estilos idênticos a adição/edição -->
<style>
.abrigo-form {
    max-width: 1500px;
    margin: 0 auto;
    padding: 30px;
    background-color: #f8f8f8;
    border-radius: 8px;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 25px 40px;
    align-items: flex-start;
}

.form-group {
    display: flex;
    flex-direction: column;
}

label {
    font-weight: 600;
    color: #004080;
    margin-bottom: 6px;
    font-size: 14px;
}

input {
    padding: 10px 12px;
    border-radius: 6px;
    border: 1px solid #aaa;
    font-size: 14px;
    height: 40px;
    background-color: #e9e9e9; /* Indica readonly */
}

.form-item.full-width { flex-basis: 100%; }

.buttons {
    margin-top: 30px;
    text-align: center;
}

.btn-cancel {
    background-color: #ccc;
    color: #333;
    border: none;
    padding: 10px 25px;
    border-radius: 6px;
    text-decoration: none;
    font-size: 16px;
}

.btn-cancel:hover {
    background-color: #999;
}

@media (max-width: 768px) {
    .form-grid {
        grid-template-columns: 1fr;
    }
}
</style>

<!-- Leaflet.js para mapa -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
var lat = parseFloat("{{ abrigo.latitude or -15.7801 }}");
var lng = parseFloat("{{ abrigo.longitude or -47.9292 }}");

var map = L.map('map').setView([lat, lng], 16);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
}).addTo(map);

// Marcador fixo
L.marker([lat, lng]).addTo(map)
    .bindPopup("{{ abrigo.nome }}")
    .openPopup();
</script>
{% endblock %}
